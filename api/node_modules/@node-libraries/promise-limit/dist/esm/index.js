export const promiseLimit = (ps = new Set()) => ({
    add: (p) => ps.add(typeof p === 'function' ? p() : !!p.then(() => ps.delete(p)).catch(() => ps.delete(p)) && p),
    wait: (limit) => ps.size >= limit && Promise.race(ps),
    all: () => Promise.all(ps),
});
//# sourceMappingURL=index.js.map