{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"AAAA,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,KAAK,IAAI,GAAG,EAAoB,EAAE,EAAE,CAAC,CAAC;IACjE,GAAG,EAAE,CAAC,CAA8C,EAAE,EAAE,CACtD,EAAE,CAAC,GAAG,CACJ,OAAO,CAAC,KAAK,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAC5F;IACH,IAAI,EAAE,CAAC,KAAa,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,IAAI,KAAK,IAAI,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;IAC7D,GAAG,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC;CAC3B,CAAC,CAAC","sourcesContent":["export const promiseLimit = (ps = new Set<Promise<unknown>>()) => ({\n  add: (p: Promise<unknown> | (() => Promise<unknown>)) =>\n    ps.add(\n      typeof p === 'function' ? p() : !!p.then(() => ps.delete(p)).catch(() => ps.delete(p)) && p\n    ),\n  wait: (limit: number) => ps.size >= limit && Promise.race(ps),\n  all: () => Promise.all(ps),\n});\n"]}