"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.list = exports.action = void 0;
const commander_1 = require("commander");
const supabase_1 = require("../../../libs/supabase");
const action = async (options) => {
    const url = options.url || (await (0, supabase_1.getSupabaseUrl)());
    if (!url) {
        console.error("Url unknown");
        return;
    }
    const apiKey = options.service_role || (await (0, supabase_1.getSupabaseServiceRole)());
    if (!apiKey) {
        console.error("Service role unknown");
        return;
    }
    (0, supabase_1.getUsers)({ url, apiKey });
};
exports.action = action;
exports.list = commander_1.program
    .createCommand("list")
    .description("Display of remote user list")
    .addOption(new commander_1.Option("-u, --url <url>", "Url of supabase"))
    .addOption(new commander_1.Option("-k, --service_role <service_role>", "Service role of supabase"))
    .action(exports.action);
