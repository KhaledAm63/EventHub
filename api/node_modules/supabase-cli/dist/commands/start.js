"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.start = exports.startSupabase = void 0;
const commander_1 = require("commander");
const database_1 = require("../libs/database");
const docker_1 = require("../libs/docker");
const supabase_1 = require("../libs/supabase");
const init_1 = require("./init");
const startSupabase = async () => {
    await (0, init_1.initSupabase)();
    await (0, docker_1.execDocker)("up -d");
    await (0, supabase_1.outputStatus)();
    await new Promise((resolve) => setTimeout(resolve, 3000));
    await (0, database_1.migrateDatabaseUser)({
        dir: "supabase/migrations",
    });
};
exports.startSupabase = startSupabase;
exports.start = commander_1.program
    .createCommand("start")
    .description("Launch supabase")
    .action(exports.startSupabase);
